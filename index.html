
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Partial.ly API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <div id="logo-wrap">
        <img src="images/logo.png" class="logo" alt="Logo" />
      </div>
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
              <a href="#" data-language-name="javascript">Node</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#pagination" class="toc-h1 toc-link" data-title="Pagination">Pagination</a>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
          <li>
            <a href="#offers" class="toc-h1 toc-link" data-title="Offers">Offers</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#list-all-offers" class="toc-h2 toc-link" data-title="List All Offers">List All Offers</a>
                  </li>
                  <li>
                    <a href="#get-a-specific-offer" class="toc-h2 toc-link" data-title="Get a Specific Offer">Get a Specific Offer</a>
                  </li>
                  <li>
                    <a href="#create-a-new-offer" class="toc-h2 toc-link" data-title="Create a new offer">Create a new offer</a>
                  </li>
                  <li>
                    <a href="#update-an-offer" class="toc-h2 toc-link" data-title="Update an offer">Update an offer</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#offer-items" class="toc-h1 toc-link" data-title="Offer Items">Offer Items</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#list-offer-items" class="toc-h2 toc-link" data-title="List offer items">List offer items</a>
                  </li>
                  <li>
                    <a href="#create-a-new-offer-item" class="toc-h2 toc-link" data-title="Create a new offer item">Create a new offer item</a>
                  </li>
                  <li>
                    <a href="#update-offer-item" class="toc-h2 toc-link" data-title="Update offer item">Update offer item</a>
                  </li>
                  <li>
                    <a href="#delete-offer-item" class="toc-h2 toc-link" data-title="Delete offer item">Delete offer item</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#customers" class="toc-h1 toc-link" data-title="Customers">Customers</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#list-all-customers" class="toc-h2 toc-link" data-title="List All Customers">List All Customers</a>
                  </li>
                  <li>
                    <a href="#get-a-specific-customer" class="toc-h2 toc-link" data-title="Get a Specific Customer">Get a Specific Customer</a>
                  </li>
                  <li>
                    <a href="#create-a-new-customer" class="toc-h2 toc-link" data-title="Create a new customer">Create a new customer</a>
                  </li>
                  <li>
                    <a href="#update-a-customer" class="toc-h2 toc-link" data-title="Update a customer">Update a customer</a>
                  </li>
                  <li>
                    <a href="#gdpr-remove" class="toc-h2 toc-link" data-title="GDPR remove">GDPR remove</a>
                  </li>
                  <li>
                    <a href="#log-in-with-password" class="toc-h2 toc-link" data-title="Log in with password">Log in with password</a>
                  </li>
                  <li>
                    <a href="#email-login-token" class="toc-h2 toc-link" data-title="Email login token">Email login token</a>
                  </li>
                  <li>
                    <a href="#login-with-a-token" class="toc-h2 toc-link" data-title="Login with a token">Login with a token</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#payment-methods" class="toc-h1 toc-link" data-title="Payment Methods">Payment Methods</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-payment-method" class="toc-h2 toc-link" data-title="Create payment method">Create payment method</a>
                  </li>
                  <li>
                    <a href="#list-payment-methods" class="toc-h2 toc-link" data-title="List payment methods">List payment methods</a>
                  </li>
                  <li>
                    <a href="#delete-payment-method" class="toc-h2 toc-link" data-title="Delete payment method">Delete payment method</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#payment-plans" class="toc-h1 toc-link" data-title="Payment Plans">Payment Plans</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-a-new-payment-plan" class="toc-h2 toc-link" data-title="Create a new payment plan">Create a new payment plan</a>
                  </li>
                  <li>
                    <a href="#open-a-payment-plan" class="toc-h2 toc-link" data-title="Open a payment plan">Open a payment plan</a>
                  </li>
                  <li>
                    <a href="#cancel-a-payment-plan" class="toc-h2 toc-link" data-title="Cancel a payment plan">Cancel a payment plan</a>
                  </li>
                  <li>
                    <a href="#update-a-payment-plan" class="toc-h2 toc-link" data-title="Update a payment plan">Update a payment plan</a>
                  </li>
                  <li>
                    <a href="#retrieve-a-payment-plan" class="toc-h2 toc-link" data-title="Retrieve a payment plan">Retrieve a payment plan</a>
                  </li>
                  <li>
                    <a href="#list-all-plans" class="toc-h2 toc-link" data-title="List all plans">List all plans</a>
                  </li>
                  <li>
                    <a href="#send-plan-request-email" class="toc-h2 toc-link" data-title="Send plan request email">Send plan request email</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#line-items" class="toc-h1 toc-link" data-title="Line Items">Line Items</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-a-line-item" class="toc-h2 toc-link" data-title="Create a line item">Create a line item</a>
                  </li>
                  <li>
                    <a href="#delete-a-line-item" class="toc-h2 toc-link" data-title="Delete a line item">Delete a line item</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#payments" class="toc-h1 toc-link" data-title="Payments">Payments</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-a-payment" class="toc-h2 toc-link" data-title="Create a payment">Create a payment</a>
                  </li>
                  <li>
                    <a href="#confirm-a-payment" class="toc-h2 toc-link" data-title="Confirm a payment">Confirm a payment</a>
                  </li>
                  <li>
                    <a href="#list-all-payments" class="toc-h2 toc-link" data-title="List all payments">List all payments</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#payment-schedules" class="toc-h1 toc-link" data-title="Payment Schedules">Payment Schedules</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#update-a-payment-schedule" class="toc-h2 toc-link" data-title="Update a payment schedule">Update a payment schedule</a>
                  </li>
                  <li>
                    <a href="#get-contract-pdf" class="toc-h2 toc-link" data-title="Get contract pdf">Get contract pdf</a>
                  </li>
                  <li>
                    <a href="#create-a-new-payment-schedule" class="toc-h2 toc-link" data-title="Create a new payment schedule">Create a new payment schedule</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#installments" class="toc-h1 toc-link" data-title="Installments">Installments</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#pay-scheduled-installment" class="toc-h2 toc-link" data-title="Pay scheduled installment">Pay scheduled installment</a>
                  </li>
                  <li>
                    <a href="#list-installments" class="toc-h2 toc-link" data-title="List installments">List installments</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#refunds" class="toc-h1 toc-link" data-title="Refunds">Refunds</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#refund-a-payment" class="toc-h2 toc-link" data-title="Refund a payment">Refund a payment</a>
                  </li>
                  <li>
                    <a href="#list-refunds" class="toc-h2 toc-link" data-title="List refunds">List refunds</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#disputes" class="toc-h1 toc-link" data-title="Disputes">Disputes</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#list-disputes" class="toc-h2 toc-link" data-title="List disputes">List disputes</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#webhooks" class="toc-h1 toc-link" data-title="Webhooks">Webhooks</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-a-webhook" class="toc-h2 toc-link" data-title="Create a webhook">Create a webhook</a>
                  </li>
                  <li>
                    <a href="#list-webhooks" class="toc-h2 toc-link" data-title="List webhooks">List webhooks</a>
                  </li>
                  <li>
                    <a href="#delete-a-webhook" class="toc-h2 toc-link" data-title="Delete a webhook">Delete a webhook</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='https:/partial.ly/merchant'>Partial.ly Merchant Portal</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>The Partial.ly API allows you to programmatically access the data in your Partial.ly merchant account and create payment plans and payments.
The API is currently in beta mode, so there may be minor changes. If you have feedback we would love to hear it.</p>

<p>Our API follows REST principles and accepts and returns all data in <a href="http://www.json.org/">JSON</a> format. All requests must include the <code>Accept: application/json</code> HTTP header. POST and PUT data must be JSON encoded, and must have the <code>Content-Type: application/json</code> HTTP header.
The base URL for all API calls is <strong>https://partial.ly/api</strong>.</p>

<p>We also have a staging server at demo.partial.ly, so if you want to test your integration please use the base URL <strong>https://demo.partial.ly/api</strong>. Note that you will have to register for a separate account here than your live Partial.ly account.</p>

<p>If you have any questions you can&#39;t find the answer to here, please contact our <a href="mailto:support@partial.ly">support</a>.</p>
<h1 id='authentication'>Authentication</h1>
<blockquote>
<p>To authorize, use this code:</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/offer"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/offer'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>Make sure to replace <code>your_api_key</code> with your API key.</p>
</blockquote>

<p>Partial.ly uses API keys to allow access to the API. You can find your API key in the <a href="https://partial.ly/merchant">Partial.ly merchant portal</a> by navigating to Settings &gt; general. If you have don&#39;t have any API key yet, click the generate key link to generate a new API key. Your API key carries many privileges, so be sure to keep it secure! Do not share your secret API key in publicly accessible areas such as GitHub, client-side code, and so forth.</p>

<p>Partial.ly expects for the API key to be included in all API requests to the server in a header that looks like the following:</p>

<p><code>Authorization: Bearer your_api_key</code></p>

<aside class="notice">
You must replace <code>your_api_key</code> with your personal API key.
</aside>

<p>All API requests must be made over <a href="https://en.wikipedia.org/wiki/HTTPS">HTTPS</a>. Calls made over plain HTTP will be redirected to the corresponding HTTPS URL. API requests without authentication will also fail.</p>
<h1 id='pagination'>Pagination</h1>
<p>Most API calls to list resources can be paginated using the following parameters. Some resources will have additional parameters you can use to filter the results.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>page</td>
<td>the page number to return results for</td>
</tr>
<tr>
<td>per_page</td>
<td>the number of results to return per page</td>
</tr>
</tbody></table>

<p>All response objects will have the following properties, in addition to a property containing the array of results.</p>

<table><thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>page_number</td>
<td>the current page</td>
</tr>
<tr>
<td>page_size</td>
<td>the number of results per page</td>
</tr>
<tr>
<td>total_entires</td>
<td>the total number of objects returned</td>
</tr>
<tr>
<td>total_pages</td>
<td>the total number of pages found</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Could not create offer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"errors"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"Name: can't be blank"</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Successful API calls will return HTTP status code 200. API calls that result in an error will either return HTTP status code 400 is there is a problem with the input, or 404 if a given object could not be found. The response body will be JSON object with a message key giving an overview of the issue. If there are issues with specific fields, there will also be an errors key with an array of field specific errors.</p>
<h1 id='offers'>Offers</h1>
<p>An offer is a set of terms for a potential payment plan. Think of an offer as a template for a payment plan. There are 3 variables that can be customized for an offer: down payment, payment frequency, and term. Offers can additionally have dynamically added line items, such as a payment plan fee or service charge, which can be a fixed amount or percent of the payment plan subtotal. Offers can be embedded on your website (Shopify, WooCommerce, etc.) to provide a payment plan checkout option for your customers. Or they can be used as template to quickly and easily create payment plans for invoices (FreshBooks, QuickBooks, Harvest)</p>
<h2 id='list-all-offers'>List All Offers</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/offer"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/offer'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">offers</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
  <span class="c1">// offers will be already decoded JSON array of offers</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
        </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-05T14:30:20.303624"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"term_units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"months"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"term_min"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="s2">"term_max"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
        </span><span class="s2">"term_flexible"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"term_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-09-27"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"term"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="s2">"require_ship_to"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"payment_schedule_description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"euro test"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60689b2d-d391-417e-9f59-7b65e3e50d8d"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"integration_options"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-11T05:50:30.000000"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60aed439-473f-48e0-80ef-3a8627dd243a"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"frequency_units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"months"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"frequency_min"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"frequency_max"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"frequency_flexible"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"frequency_days"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
        </span><span class="s2">"frequency"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"down_payment_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"percent"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"down_payment_min"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="s2">"down_payment_max"</span><span class="p">:</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w">
        </span><span class="s2">"down_payment_flexible"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"down_payment"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
        </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auto_process"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves all offers.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /offer</code></p>
<h2 id='get-a-specific-offer'>Get a Specific Offer</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/offer/60aed439-473f-48e0-80ef-3a8627dd243a"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/offer/60aed439-473f-48e0-80ef-3a8627dd243a'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">offer</span><span class="p">)</span> <span class="p">{</span>

<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-05T14:30:20.303624"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"term_units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"months"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"term_min"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"term_max"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
    </span><span class="s2">"term_flexible"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"term_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-09-27"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"term"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"require_ship_to"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payment_schedule_description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"euro test"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60689b2d-d391-417e-9f59-7b65e3e50d8d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"integration_options"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-11T05:50:30.000000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60aed439-473f-48e0-80ef-3a8627dd243a"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"frequency_units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"months"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"frequency_min"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"frequency_max"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"frequency_flexible"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"frequency_days"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"frequency"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"down_payment_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"percent"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"down_payment_min"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="s2">"down_payment_max"</span><span class="p">:</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w">
    </span><span class="s2">"down_payment_flexible"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"down_payment"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EUR"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auto_process"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves a specific offer.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET /offer/:id</code></p>

<p><em>replace :id in the URL with the id of the offer to retrieve</em></p>
<h2 id='create-a-new-offer'>Create a new offer</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/offer"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  --data <span class="s1">'{"name": "Sample offer"}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/offer'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="s1">'Sample offer'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">offer</span><span class="p">)</span> <span class="p">{</span>

<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-05T14:30:20.303624"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"term_units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"months"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"term_min"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"term_max"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"term_flexible"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"term_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"term"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"require_ship_to"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payment_schedule_description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sample offer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60689b2d-d391-417e-9f59-7b65e3e50d8d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"integration_options"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-11T05:50:30.000000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60aed439-473f-48e0-80ef-3a8627dd243a"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"frequency_units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"months"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"frequency_min"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"frequency_max"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"frequency_flexible"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"frequency_days"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"frequency"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"down_payment_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"percent"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"down_payment_min"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"down_payment_max"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"down_payment_flexible"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"down_payment"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auto_process"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint creates a new offer</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>POST /offer</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>yes</td>
<td></td>
<td>The name of the offer</td>
</tr>
<tr>
<td>auto_process</td>
<td>boolean</td>
<td>no</td>
<td>true</td>
<td>true to automatically schedule future payments, false for manual payments</td>
</tr>
<tr>
<td>payment_schedule_description</td>
<td>string</td>
<td>no</td>
<td></td>
<td>for manual payment plans, a description of the payment schedule</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>no</td>
<td>currency in merchant settings</td>
<td>The currency to use for payment plans</td>
</tr>
<tr>
<td>down_payment</td>
<td>decimal</td>
<td>no</td>
<td>0</td>
<td>the amount or percent of down payment required, depending on down_payment_type</td>
</tr>
<tr>
<td>down_payment_type</td>
<td>string</td>
<td>no</td>
<td>percent</td>
<td>&quot;percent&quot; for a percent of the payment plan subtotal or &quot;fixed&quot; for a fixed amount</td>
</tr>
<tr>
<td>down_payment_flexible</td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>allow the customer to choose their down payment within a specified range</td>
</tr>
<tr>
<td>down_payment_min</td>
<td>decimal</td>
<td>no</td>
<td></td>
<td>min down payment percent or amount</td>
</tr>
<tr>
<td>down_payment_max</td>
<td>decimal</td>
<td>no</td>
<td></td>
<td>max down payment percent or amount</td>
</tr>
<tr>
<td>term</td>
<td>integer</td>
<td>no</td>
<td>3</td>
<td>the length of the payment plan</td>
</tr>
<tr>
<td>term_units</td>
<td>string</td>
<td>no</td>
<td>months</td>
<td>type of units for the payment plan term. weeks, months, years, payments (a fixed number of payments), or date (pay by a date)</td>
</tr>
<tr>
<td>term_date</td>
<td>date</td>
<td>no</td>
<td></td>
<td>final payment date when using term_units=date</td>
</tr>
<tr>
<td>term_flexible</td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>allow the customer to choose their term within the specified range</td>
</tr>
<tr>
<td>term_min</td>
<td>integer</td>
<td>no</td>
<td></td>
<td>the minimum term the customer can choose</td>
</tr>
<tr>
<td>term_max</td>
<td>integer</td>
<td>no</td>
<td></td>
<td>the maximum term the customer can choose</td>
</tr>
<tr>
<td>frequency</td>
<td>integer</td>
<td>no</td>
<td>1</td>
<td>the frequency of scheduled payments</td>
</tr>
<tr>
<td>frequency_units</td>
<td>string</td>
<td>no</td>
<td>months</td>
<td>type of units for the payment plan term. days, weeks, months, days_month (for specific days of the month)</td>
</tr>
<tr>
<td>frequency_days</td>
<td>array</td>
<td>no</td>
<td></td>
<td>array of specific days of the month for payments, for example [1, 15] for payments on the 1st and 15th of the month</td>
</tr>
<tr>
<td>frequency_flexible</td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>allow the customer to choose their payment frequency within the specified range</td>
</tr>
<tr>
<td>frequency_min</td>
<td>integer</td>
<td>no</td>
<td></td>
<td>the minimum payment frequency the customer can choose</td>
</tr>
<tr>
<td>frequency_max</td>
<td>integer</td>
<td>no</td>
<td></td>
<td>the maximum payment frequency the customer can choose</td>
</tr>
</tbody></table>
<h2 id='update-an-offer'>Update an offer</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/offer/60aed439-473f-48e0-80ef-3a8627dd243a"</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  --data <span class="s1">'{"down_payment": 5}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/offer/60aed439-473f-48e0-80ef-3a8627dd243a'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'PUT'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">down_payment</span><span class="p">:</span> <span class="mi">5</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">offer</span><span class="p">)</span> <span class="p">{</span>

<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-05T14:30:20.303624"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"term_units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"months"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"term_min"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"term_max"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"term_flexible"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"term_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"term"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"require_ship_to"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payment_schedule_description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sample offer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60689b2d-d391-417e-9f59-7b65e3e50d8d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"integration_options"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-11T05:50:30.000000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60aed439-473f-48e0-80ef-3a8627dd243a"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"frequency_units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"months"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"frequency_min"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"frequency_max"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"frequency_flexible"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"frequency_days"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"frequency"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"down_payment_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"percent"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"down_payment_min"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"down_payment_max"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"down_payment_flexible"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"down_payment"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auto_process"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Updates an existing offer</p>

<p><code>PUT /offer/:id</code></p>

<p><em>replace :id with the id of the offer to update</em></p>

<p>Same parameters as create offer</p>
<h1 id='offer-items'>Offer Items</h1>
<p>Offer items are additional line items that can automatically be added to a payment plan, a customer fee for instance.
Offer items can be for fixed amounts or a percent of the payment plan subtotal.</p>
<h2 id='list-offer-items'>List offer items</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/offer_item?offer_id=60aed439-473f-48e0-80ef-3a8627dd243a"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/offer_item?offer_id=60aed439-473f-48e0-80ef-3a8627dd243a'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
  <span class="c1">// body.offer_items</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"offer_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-05T14:49:20.558357"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"offer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60aed439-473f-48e0-80ef-3a8627dd243a"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test api creation"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-05T14:44:59.631679"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"61ed5fdf-fbdf-4b06-9a8a-0fb05cdf6f26"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"percent"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.2</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Gets all the offer items associated with an offer</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /offer_item</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>offer_id</td>
<td>string</td>
<td>yes</td>
<td>offer id to get offer items for</td>
</tr>
</tbody></table>
<h2 id='create-a-new-offer-item'>Create a new offer item</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/offer_item"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  --data <span class="s1">'{"name": "processing fee", "amount": 2.5, "amount_type": "percent", "offer_id": "60aed439-473f-48e0-80ef-3a8627dd243a"}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/offer_item'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">offer_id</span><span class="p">:</span> <span class="s1">'60aed439-473f-48e0-80ef-3a8627dd243a'</span><span class="p">,</span>
    <span class="na">name</span><span class="p">:</span> <span class="s1">'processing fee'</span><span class="p">,</span>
    <span class="na">amount</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">,</span>
    <span class="na">amount_type</span><span class="p">:</span> <span class="s1">'percent'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">offer_item</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-27T21:00:47.730189"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"offer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60aed439-473f-48e0-80ef-3a8627dd243a"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"processing fee"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-27T21:00:47.730182"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a9bec449-da6e-4dea-ad4a-a716aa90d40c"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"percent"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.5</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Creates a new offer item associated with an offer</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST /offer_item</code></p>
<h3 id='parameters-2'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>yes</td>
<td></td>
<td>The name of the offer item</td>
</tr>
<tr>
<td>offer_id</td>
<td>string</td>
<td>yes</td>
<td></td>
<td>id of offer to associate item with</td>
</tr>
<tr>
<td>amount_type</td>
<td>string</td>
<td>yes</td>
<td></td>
<td>either percent or fixed</td>
</tr>
<tr>
<td>amount</td>
<td>decimal</td>
<td>yes</td>
<td></td>
<td>The amount to add to the plan. For percent will be this percent of the plan subtotal</td>
</tr>
</tbody></table>
<h2 id='update-offer-item'>Update offer item</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/offer_item/a9bec449-da6e-4dea-ad4a-a716aa90d40c"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  --data <span class="s1">'{"amount": 3.75}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/offer_item/a9bec449-da6e-4dea-ad4a-a716aa90d40c'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'PUT'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">amount</span><span class="p">:</span> <span class="mf">3.75</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">offer_item</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-27T21:00:47.730189"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"offer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60aed439-473f-48e0-80ef-3a8627dd243a"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"processing fee"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-27T21:00:47.730182"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a9bec449-da6e-4dea-ad4a-a716aa90d40c"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"percent"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.75</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>updates an existing offer item</p>

<p><code>PUT /offer_item/:id</code></p>

<p><em>replace :id with the id of the offer item to update</em></p>

<p>Same parameters as create offer item</p>
<h2 id='delete-offer-item'>Delete offer item</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/offer_item/a9bec449-da6e-4dea-ad4a-a716aa90d40c"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -X DELETE
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/offer_item/a9bec449-da6e-4dea-ad4a-a716aa90d40c'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'DELETE'</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OfferItem deleted"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>deletes an offer item</p>

<p><code>DELETE /offer_item/:id</code></p>

<p><em>replace :id with the id of the offer item to delete</em></p>
<h1 id='customers'>Customers</h1><h2 id='list-all-customers'>List All Customers</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/customer"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/customer'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">customers</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
  <span class="c1">// offers will be already decoded JSON array of customers</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_entries"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"page_size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="s2">"page_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"customers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/New_York"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FL"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33601"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sample Customer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tampa"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_address2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 N. Tampa St."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"81325551212"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Customer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-11T05:54:27.000000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6d30d3c8-d024-45cc-9c3f-356fc8aee23d"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sample"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample.customer@gmail.com"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/New_York"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_postal_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_country"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_city"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_address2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5042265544"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Appleseed"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-23T15:03:20.000000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9a426155-a927-4984-8738-0bd1ffc15248"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jappleseed@yahoo.com"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves all customers.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /customer</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>q</td>
<td>Search query. Will search for email if query contains an @, otherwise will search for partial match on first and last names</td>
</tr>
</tbody></table>
<h2 id='get-a-specific-customer'>Get a Specific Customer</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/customer/9a426155-a927-4984-8738-0bd1ffc15248"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/customer/9a426155-a927-4984-8738-0bd1ffc15248'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">customer</span><span class="p">)</span> <span class="p">{</span>

<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/New_York"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_postal_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_country"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_city"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_address2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5042265544"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Appleseed"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-23T15:03:20.000000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9a426155-a927-4984-8738-0bd1ffc15248"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jappleseed@yahoo.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves a specific customer.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET /customer/:id</code></p>

<p><em>replace :id in the URL with the id of the customer to retrieve</em></p>
<h2 id='create-a-new-customer'>Create a new customer</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/customer"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  --data <span class="s1">'{"email": "testing@aol.com", "first_name": "John", "last_name": "Doe"}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/customer'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">email</span><span class="p">:</span> <span class="s1">'testing@aol.com'</span><span class="p">,</span>
    <span class="na">first_name</span><span class="p">:</span> <span class="s1">'John'</span><span class="p">,</span>
    <span class="na">last_name</span><span class="p">:</span> <span class="s1">'Doe'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">customer</span><span class="p">)</span> <span class="p">{</span>

<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/New_York"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_postal_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_city"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_address2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-27T20:10:19.437168"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"53479e98-27a9-49e2-856c-bf47d0796ffc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testing@aol.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint creates a new customer</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>POST /customer</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string</td>
<td>yes</td>
<td></td>
<td>Customer email</td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td>no</td>
<td></td>
<td>First name</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>no</td>
<td></td>
<td>Last name</td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td>no</td>
<td></td>
<td>Phone number</td>
</tr>
<tr>
<td>language</td>
<td>string</td>
<td>no</td>
<td>en</td>
<td>Customer interface display language</td>
</tr>
<tr>
<td>timezone</td>
<td>string</td>
<td>no</td>
<td>America/New_York</td>
<td>timezone for date formatting</td>
</tr>
<tr>
<td>shipto_name</td>
<td>string</td>
<td>no</td>
<td></td>
<td>default ship to name for customer&#39;s payment plans</td>
</tr>
<tr>
<td>shipto_address</td>
<td>string</td>
<td>no</td>
<td></td>
<td>street address</td>
</tr>
<tr>
<td>shipto_address2</td>
<td>string</td>
<td>no</td>
<td></td>
<td>street address line 2</td>
</tr>
<tr>
<td>shipto_city</td>
<td>string</td>
<td>no</td>
<td></td>
<td>city</td>
</tr>
<tr>
<td>shipto_state</td>
<td>string</td>
<td>no</td>
<td></td>
<td>2 letter state/province/region code</td>
</tr>
<tr>
<td>shipto_country</td>
<td>string</td>
<td>no</td>
<td>US</td>
<td>2 letter country code</td>
</tr>
<tr>
<td>shipto_postal_code</td>
<td>string</td>
<td>no</td>
<td></td>
<td>ZIP/postal code</td>
</tr>
<tr>
<td>password</td>
<td>string</td>
<td>no</td>
<td></td>
<td>if a new user is being created, use the supplied password. Otherwise a random password will be generated</td>
</tr>
</tbody></table>
<h2 id='update-a-customer'>Update a customer</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/customer/53479e98-27a9-49e2-856c-bf47d0796ffc"</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  --data <span class="s1">'{"phone": "+12125551212"}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/customer/53479e98-27a9-49e2-856c-bf47d0796ffc'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'PUT'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">phone</span><span class="p">:</span> <span class="s1">'+12125551212'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">customer</span><span class="p">)</span> <span class="p">{</span>

<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/New_York"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_postal_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_city"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_address2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+12125551212"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-27T20:10:19.437168"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"53479e98-27a9-49e2-856c-bf47d0796ffc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"testing@aol.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Updates an existing customer</p>

<p><code>PUT /customer/:id</code></p>

<p><em>replace :id with the id of the customer to update</em></p>

<p>Same parameters as create customer</p>
<h2 id='gdpr-remove'>GDPR remove</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/customer/gdpr_remove/53479e98-27a9-49e2-856c-bf47d0796ffc"</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/customer/gdpr_remove/53479e98-27a9-49e2-856c-bf47d0796ffc'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'PUT'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>

<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Customer account deleted"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Removal of customer information for GDPR. Customers with open payment plans cannot be deleted.
If the customer has payment and payment plan information in Partial.ly, the payment and payment plan information will not be deleted,
but all personally identifiable customer information will be anonymized. If the customer has no payment plan history all information will be deleted.</p>

<p><code>PUT /customer/gdpr_remove/:id</code></p>

<p><em>replace :id with the id of the customer to to remove</em></p>
<h2 id='log-in-with-password'>Log in with password</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/customer/login_password"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  --data <span class="s1">'{"email": "aaa@y.co", "password": "test"}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/customer/login_password'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">email</span><span class="p">:</span> <span class="s1">'aaa@y.co'</span><span class="p">,</span>
    <span class="na">password</span><span class="p">:</span> <span class="s1">'test'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">cust</span><span class="p">)</span> <span class="p">{</span>

<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/New_York"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_postal_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_city"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_address2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Person"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T16:57:42.923471"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e3cbf1dc-0c11-483f-b604-d44fd93aac90"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Testing"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaa@y.co"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Authenticate a customer with their email and password. Alternatively, customers can have a token generated and sent to their email with the <a href="#email-login-token">email login token</a> method, which can then be used to login with the <a href="#login-with-a-token">login with a token</a> method.</p>

<p><code>POST /customer/login_password</code></p>
<h3 id='parameters-2'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>password</td>
<td>string</td>
<td>yes</td>
</tr>
</tbody></table>
<h2 id='email-login-token'>Email login token</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/customer/login_email"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  --data <span class="s1">'{"email": "aaa@y.co"}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/customer/login_email'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">email</span><span class="p">:</span> <span class="s1">'aaa@y.co'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>

<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Token sent"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Generates a token which can be used with the <a href="#login-with-a-token">login with a token</a> method and emails it to the customer.</p>

<p><code>POST /customer/login_email</code></p>
<h3 id='parameters-3'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string</td>
<td>yes</td>
</tr>
</tbody></table>
<h2 id='login-with-a-token'>Login with a token</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/customer/login_token"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  --data <span class="s1">'{"token": "N5E9gL", "email": "aaa@y.co"}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/customer/login_token'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">token</span><span class="p">:</span> <span class="s1">'N5E9gL'</span><span class="p">,</span>
    <span class="na">email</span><span class="p">:</span> <span class="s1">'aaa@y.co'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">cust</span><span class="p">)</span> <span class="p">{</span>

<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/New_York"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_postal_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_city"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_address2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"shipto_address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Person"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T16:57:42.923471"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e3cbf1dc-0c11-483f-b604-d44fd93aac90"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Testing"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaa@y.co"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Authenticate a customer with a token generated from the <a href="#email-login-token">email a login token</a> step.</p>

<p><code>POST /customer/login_token</code></p>
<h3 id='parameters-4'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>token</td>
<td>string</td>
<td>yes</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>yes</td>
</tr>
</tbody></table>
<h1 id='payment-methods'>Payment Methods</h1>
<p>A saved payment method attached to a customer. May be any type of credit or debit card.</p>
<h2 id='create-payment-method'>Create payment method</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/payment_method"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  --data <span class="s1">'{"type": "card", "token_id": "tok_ch", "customer_id": "452cc42f-d999-4c0f-998b-325c4e0e8f57"}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/payment_method'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">customer_id</span><span class="p">:</span> <span class="s1">'452cc42f-d999-4c0f-998b-325c4e0e8f57'</span><span class="p">,</span>
    <span class="na">type</span><span class="p">:</span> <span class="s1">'card'</span><span class="p">,</span>
    <span class="na">token_id</span><span class="p">:</span> <span class="s1">'tok_ch'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">payment_method</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"integration_details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"last4"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0009"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"funding"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"exp_year"</span><span class="p">:</span><span class="w"> </span><span class="mi">2019</span><span class="p">,</span><span class="w">
        </span><span class="s2">"exp_month"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
        </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CH"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Visa"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-27T21:38:39.520750"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"36afc659-f03d-485b-a850-65871fa759a7"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Example HTML to capture card details with Stripe.js</p>
</blockquote>
<pre class="highlight html tab-html"><code><span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">"payment-form"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"card-element"</span><span class="nt">&gt;</span>
    <span class="c">&lt;!-- A Stripe Element will be inserted here. --&gt;</span>
  <span class="nt">&lt;/div&gt;</span>

  <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">"btnSubmit"</span><span class="nt">&gt;</span>Add Payment Method<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/form&gt;</span>

<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://js.stripe.com/v3/"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span>
<span class="c1">// partial.ly public key</span>
<span class="kd">var</span> <span class="nx">publicKey</span> <span class="o">=</span> <span class="s1">'pk_test_eV3vdXbE4SrfLjJYn9XUSUwx'</span><span class="p">,</span>
  <span class="nx">stripe</span> <span class="o">=</span> <span class="nx">Stripe</span><span class="p">(</span><span class="nx">publicKey</span><span class="p">),</span>
  <span class="nx">elements</span> <span class="o">=</span> <span class="nx">stripe</span><span class="p">.</span><span class="nx">elements</span><span class="p">();</span>

<span class="c1">// Create an instance of the card Element.</span>
<span class="kd">var</span> <span class="nx">card</span> <span class="o">=</span> <span class="nx">elements</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="s1">'card'</span><span class="p">);</span>

<span class="c1">// Add an instance of the card Element into the `card-element` &lt;div&gt;.</span>
<span class="nx">card</span><span class="p">.</span><span class="nx">mount</span><span class="p">(</span><span class="s1">'#card-element'</span><span class="p">);</span>

<span class="c1">// Handle form submission.</span>
<span class="kd">var</span> <span class="nx">form</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'payment-form'</span><span class="p">);</span>
<span class="nx">form</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'submit'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// tokenize payment data with Stripe</span>
  <span class="nx">stripe</span><span class="p">.</span><span class="nx">createToken</span><span class="p">(</span><span class="nx">card</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Inform the user if there was an error.</span>
      <span class="nx">alert</span><span class="p">(</span><span class="nx">result</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="c1">// use result.token.id to send in the token_id field to Partial.ly</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre>
<p>Payment method details must not be sent directly to Partial.ly. They need to be captured and tokenized with <a href="https://stripe.com/docs/stripe-js">Stripe.js</a> before being sent to Partial.ly.</p>

<p>When creating your Stripe.js object, use the following public key to initialize the Stripe SDK</p>

<p><code>pk_live_huSEiMMI7gSK7ORKzZB448xr</code></p>

<p>When testing with our <a href="https://demo.partial.ly">Partial.ly test server</a>, use the following public key</p>

<p><code>pk_test_eV3vdXbE4SrfLjJYn9XUSUwx</code></p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /payment_method</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>customer_id</td>
<td>string</td>
<td>yes</td>
<td>id of customer to associate with</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>yes</td>
<td>&quot;card&quot;</td>
</tr>
<tr>
<td>token_id</td>
<td>string</td>
<td>no</td>
<td>the token id returned from Stripe.js. Required for &quot;card&quot; type</td>
</tr>
</tbody></table>
<h2 id='list-payment-methods'>List payment methods</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/payment_method?customer_id=452cc42f-d999-4c0f-998b-325c4e0e8f57"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/payment_method?customer_id=452cc42f-d999-4c0f-998b-325c4e0e8f57'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">payment_methods</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"payment_methods"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"integration_details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"last4"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0009"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"funding"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"exp_year"</span><span class="p">:</span><span class="w"> </span><span class="mi">2019</span><span class="p">,</span><span class="w">
                </span><span class="s2">"exp_month"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
                </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CH"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Visa"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-27T21:38:39.520750"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"36afc659-f03d-485b-a850-65871fa759a7"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bank_account"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"integration_details"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"routing_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"110000000"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"plaid_access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"access-sandbox-a5232606-49c8-4768-b07e-4fd0baf38c21"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"last4"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6789"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"bank_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"STRIPE TEST BANK"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"account_holder_type"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"account_holder_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-06-05T13:33:04.980000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1754a33c-419f-4233-9c62-7fd9f5f7d088"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Gets the list of payment methods associated with a customer</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET /payment_method</code></p>
<h3 id='parameters-2'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>customer_id</td>
<td>string</td>
<td>yes</td>
<td>id of customer to get payment methods for</td>
</tr>
</tbody></table>
<h2 id='delete-payment-method'>Delete payment method</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/payment_method/36afc659-f03d-485b-a850-65871fa759a7"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -X DELETE
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/payment_method/36afc659-f03d-485b-a850-65871fa759a7'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'DELETE'</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Payment method deleted"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Deletes a payment method. Payment methods which are attached to open payment plans may not be deleted.</p>

<p><code>DELETE /payment_method/:id</code></p>

<p><em>replace :id with the id of the payment method to delete</em></p>
<h1 id='payment-plans'>Payment Plans</h1><h2 id='create-a-new-payment-plan'>Create a new payment plan</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/payment_plan"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  --data <span class="s1">'{"amount": "1000", "customer_id": "452cc42f-d999-4c0f-998b-325c4e0e8f57", "offer_id": "60aed439-473f-48e0-80ef-3a8627dd243a"}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/payment_plan'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">amount</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="na">customer</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">email</span><span class="p">:</span> <span class="s1">'aaa@y.co'</span><span class="p">,</span>
      <span class="na">first_name</span><span class="p">:</span> <span class="s1">'Testing'</span><span class="p">,</span>
      <span class="na">last_name</span><span class="p">:</span> <span class="s1">'Person'</span>
    <span class="p">},</span>
    <span class="na">offer_id</span><span class="p">:</span> <span class="s1">'60aed439-473f-48e0-80ef-3a8627dd243a'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"payment_schedule"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"term_units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"months"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"term"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="s2">"starts_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"starts_auto"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"repay_by_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-28"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"payment_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="p">,</span><span class="w">
        </span><span class="s2">"num_payments"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T17:20:46.753612"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8e2db276-7b45-4f1b-b479-0c25544d90c2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"frequency_units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"months"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"frequency"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"down_payment_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="p">,</span><span class="w">
        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contract_signed_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contract_signature"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contract_body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"By submitting your order and authorizing the charges on your card, you are legally bound to..."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">768.75</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auto_process"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1025</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"payment_plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"user_agent"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"subtotal"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"checkout"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"merchant_notes"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ip_address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"integration_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"integration"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T17:20:46.711165"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2ab17c1a-860d-4575-be11-dcd5bbab467d"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e3cbf1dc-0c11-483f-b604-d44fd93aac90"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/New_York"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_postal_code"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_city"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_address2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Person"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T16:57:42.923471"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e3cbf1dc-0c11-483f-b604-d44fd93aac90"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Testing"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaa@y.co"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount_paid"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1025</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"line_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T17:20:46.766599"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f345d9da-b67f-4056-8224-f7d9599f9439"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dynamic_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"generic"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dynamic"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"processing fee"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"installments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-12-28T17:20:46.752714Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-28T17:20:46.752714Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-28T17:20:46.752714Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Creates a new payment plan in <em>checkout</em> status. The payment schedule can automatically be created from an offer by sending an <em>offer_id</em> parameter, otherwise a <em>payment_schedule</em> can be specified. Likewise, either a <em>customer_id</em> for an existing customer can be specified, or a customer object can be sent and a new customer will be created, or the existing one attached.
To open the payment plan, use the <a href="#open-a-payment-plan">open</a> method after it has been created.</p>

<p>A payment schedule will also be created and associated with the payment plan. The scheduled installments will also be generated and returned, but they will not be stored in the database until the payment plan is opened.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /payment_plan</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>amount</td>
<td>decimal</td>
<td>yes</td>
<td>total amount of the payment plan</td>
</tr>
<tr>
<td>customer_id</td>
<td>string</td>
<td>no</td>
<td>id of customer to associate with, required if customer not set</td>
</tr>
<tr>
<td>customer</td>
<td>object</td>
<td>no</td>
<td><a href="#customers">customer</a> object to associate with, required if customer_id not set</td>
</tr>
<tr>
<td>offer_id</td>
<td>string</td>
<td>no</td>
<td>id of offer to use to generate payment schedule, required if payment_schedule not set</td>
</tr>
<tr>
<td>payment_schedule</td>
<td>object</td>
<td>no</td>
<td><a href="#payment-schedules">payment schedule</a> parameters, required if offer_id not set</td>
</tr>
<tr>
<td>meta</td>
<td>object</td>
<td>no</td>
<td>any custom meta data. May also set line_items key to an array of <code>line_items</code> (see below)</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>no</td>
<td>3 letter currency code. Default to USD</td>
</tr>
<tr>
<td>ip_address</td>
<td>string</td>
<td>no</td>
<td>ip address of customer</td>
</tr>
<tr>
<td>user_agent</td>
<td>string</td>
<td>no</td>
<td>user agent of customer</td>
</tr>
<tr>
<td>shipto_name</td>
<td>string</td>
<td>no</td>
<td>shipping address name</td>
</tr>
<tr>
<td>shipto_address</td>
<td>string</td>
<td>no</td>
<td>street address</td>
</tr>
<tr>
<td>shipto_address2</td>
<td>string</td>
<td>no</td>
<td>street address line 2</td>
</tr>
<tr>
<td>shipto_city</td>
<td>string</td>
<td>no</td>
<td>city</td>
</tr>
<tr>
<td>shipto_state</td>
<td>string</td>
<td>no</td>
<td>2 letter state/region/province code</td>
</tr>
<tr>
<td>shipto_postal_code</td>
<td>string</td>
<td>no</td>
<td>zip/postal code</td>
</tr>
<tr>
<td>shipto_country</td>
<td>string</td>
<td>no</td>
<td>2 letter country abbreviation</td>
</tr>
<tr>
<td>integration</td>
<td>string</td>
<td>no</td>
<td>third party integration to send payment plan to. shopify, woocommerce, bigcommerce, opencart, or prestashop</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>no</td>
<td>checkout or pending. default is checkout</td>
</tr>
<tr>
<td>send_plan_request</td>
<td>string</td>
<td>no</td>
<td>set to true to send a plan request email to customer to complete checkout. plan must be in pending status</td>
</tr>
</tbody></table>
<h3 id='line_items'>line_items</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>string</td>
<td>yes</td>
<td>description of the line item</td>
</tr>
<tr>
<td>price</td>
<td>decimal</td>
<td>yes</td>
<td>unit price of the line item</td>
</tr>
<tr>
<td>quantity</td>
<td>integer</td>
<td>yes</td>
<td>quantity</td>
</tr>
<tr>
<td>image</td>
<td>string</td>
<td>no</td>
<td>URL for an image to display in Partial.ly</td>
</tr>
<tr>
<td>weight</td>
<td>decimal</td>
<td>no</td>
<td>weight of the item</td>
</tr>
<tr>
<td>weight_units</td>
<td>string</td>
<td>no</td>
<td>lb, g, kg, oz</td>
</tr>
<tr>
<td>meta</td>
<td>object</td>
<td>no</td>
<td>additional meta data for line item. For Shopify integrations, meta.product_id and meta.variant_id must be set</td>
</tr>
</tbody></table>
<h2 id='open-a-payment-plan'>Open a payment plan</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/payment_plan/open/ef2b5088-10cc-4246-914d-1f2de7a4075c"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  --data <span class="s1">'{"payment_schedule": {"contract_signature": "Customer Signature"}, "payment_method": {"type": "card", "token_id": "tok_ch"}}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/payment_plan/open/ef2b5088-10cc-4246-914d-1f2de7a4075c'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'PUT'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">payment_schedule</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">contract_signature</span><span class="p">:</span> <span class="s1">'Customer Signature'</span>
    <span class="p">},</span>
    <span class="na">payment_method</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">type</span><span class="p">:</span> <span class="s1">'card'</span><span class="p">,</span>
      <span class="na">token_id</span><span class="p">:</span> <span class="s1">'tok_ch'</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">payment_plan</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"user_agent"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subtotal"</span><span class="p">:</span><span class="w"> </span><span class="mi">6981</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">142</span><span class="p">,</span><span class="w">
    </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"quickbooks_invoice_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1045"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Payment Plan for invoice 1045"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"merchant_notes"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ip_address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"integration_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"167"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"integration"</span><span class="p">:</span><span class="w"> </span><span class="s2">"quickbooks"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-05T22:19:33.441694"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ef2b5088-10cc-4246-914d-1f2de7a4075c"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b4b15b3b-281a-41be-9690-e7f51666b8ef"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount_paid"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">7330.05</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Opens a payment plan by signing the customer contract, attaching a payment method (new or existing), and processing the down payment if there is one. Only payment plans in <em>checkout</em> or <em>pending</em> status can be opened.</p>

<p>In case the supplied payment method requires 3d secure authentication (required for <a href="https://stripe.com/payments/strong-customer-authentication">Strong Customer Authentication</a>), the resulting payment plan will have status &quot;requires_action&quot; and will contain the &quot;redirect_url&quot; key. In this scenario, you should redirect the user to the &quot;redirect_url&quot; to authorize the payment, after which point they will be redirected back to the &quot;return_url&quot; you provide.</p>
<h3 id='http-request-2'>HTTP request</h3>
<p><code>PUT /payment_plan/open/:id</code></p>

<p><em>replace :id with the id of the payment plan to open</em></p>
<h3 id='parameters-2'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_schedule.contract_signature</td>
<td>string</td>
<td>yes</td>
<td>customer&#39;s signature</td>
</tr>
<tr>
<td>payment_method.id</td>
<td>string</td>
<td>no</td>
<td>existing payment method id</td>
</tr>
<tr>
<td>payment_method.type</td>
<td>string</td>
<td>no</td>
<td>&quot;card&quot;, required if payment_method.id not sent</td>
</tr>
<tr>
<td>payment_method.token_id</td>
<td>string</td>
<td>no</td>
<td>see <a href="#payment-methods">Payment Methods</a> for details on creating new payment methods</td>
</tr>
<tr>
<td>return_url</td>
<td>string</td>
<td>no</td>
<td>your URL to redirect user to after 3d secure authentication</td>
</tr>
</tbody></table>
<h2 id='cancel-a-payment-plan'>Cancel a payment plan</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/payment_plan/cancel/ef2b5088-10cc-4246-914d-1f2de7a4075c"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -X PUT
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/payment_plan/cancel/ef2b5088-10cc-4246-914d-1f2de7a4075c'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'PUT'</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PaymentPlan canceled"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Cancels a payment plan. Only payment plans in <em>open</em> or <em>pending</em> status may be canceled</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>PUT /payment_plan/cancel/:id</code>
<em>replace :id with the id of the payment plan to cancel</em></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>cancel_shopify</td>
<td>boolean</td>
<td>no</td>
<td>if this payment plan is for a Shopify order, also cancel the Shopify order</td>
</tr>
<tr>
<td>cancel_shopify_restock</td>
<td>boolean</td>
<td>no</td>
<td>if this payment plan is for a Shopify order, also restock the items from the order</td>
</tr>
</tbody></table>
<h2 id='update-a-payment-plan'>Update a payment plan</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/payment_plan/cancel/8f999efe-5798-4b51-a6c5-d21b0d04124b"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  -- data <span class="s1">'{"merchant_notes": "Customer is very happy"}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/payment_plan/8f999efe-5798-4b51-a6c5-d21b0d04124b'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'PUT'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">merchant_notes</span><span class="p">:</span> <span class="s1">'Customer is very happy'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">plan</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"user_agent"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subtotal"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">140</span><span class="p">,</span><span class="w">
    </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">900</span><span class="p">,</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Widget"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget-id"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Small product"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prod-sm"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sample api plan"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"merchant_notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Customer is very happy"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ip_address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"integration_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"integration"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T17:13:14.181300"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8f999efe-5798-4b51-a6c5-d21b0d04124b"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e3cbf1dc-0c11-483f-b604-d44fd93aac90"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount_paid"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1025</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Updates an existing payment plan</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>PUT /payment_plan/:id</code>
<em>replace :id with the id of the plan to update</em></p>
<h3 id='parameters-3'>Parameters</h3>
<p>only the following properties may be updated</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_notes</td>
<td>string</td>
<td>general notes, not visible to customer</td>
</tr>
<tr>
<td>payment_method_id</td>
<td>string</td>
<td>id of a payment method to use when processing payments for this plan</td>
</tr>
<tr>
<td>shipto_name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>shipto_address</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>shipto_address2</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>shipto_city</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>shipto_state</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>shipto_postal_code</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>shipto_country</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>integration</td>
<td>string</td>
<td>third party service to integrate plan with, for example &quot;shopify&quot;</td>
</tr>
<tr>
<td>integration_id</td>
<td>string</td>
<td>third party service id, for example shopify order id</td>
</tr>
</tbody></table>
<h2 id='retrieve-a-payment-plan'>Retrieve a payment plan</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/payment_plan/cancel/8f999efe-5798-4b51-a6c5-d21b0d04124b"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/payment_plan/8f999efe-5798-4b51-a6c5-d21b0d04124b'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'GET'</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">plan</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"refunds"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"requested_by_customer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"re_1DbaweEs15StTpSviCrp112t"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stripe"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"discount"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T21:51:46.423002"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a0990737-9234-44fc-857b-eac7b4ef3cbf"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"failure_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"failure_merchant_transfer_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.99</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"payments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paid"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ch_1DbXklEs15StTpSvJfo02FRM"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor_destination_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"py_E3f42E5m2H1p8b"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stripe"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"payment_plan_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8f999efe-5798-4b51-a6c5-d21b0d04124b"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"paid_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T18:27:16"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T18:27:16.896811"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2d1d0234-87c4-4184-a49f-02f4c0c30abe"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paid"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ch_1DbaigEs15StTpSvhzmfGjSA"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor_destination_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"py_E3i82Rh38K8Wg7"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stripe"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"payment_plan_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8f999efe-5798-4b51-a6c5-d21b0d04124b"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"paid_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T21:37:21"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T21:37:21.296658"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"291221ab-b0a2-41dc-909b-1d1793bd23d8"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"payment_schedule"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"term_units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"months"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"term"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="s2">"starts_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"starts_auto"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"repay_by_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-28"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"payment_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="p">,</span><span class="w">
        </span><span class="s2">"num_payments"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T17:13:14.235119"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f5d9716-a041-47ef-8c57-86af22efa31c"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"frequency_units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"months"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"frequency"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"down_payment_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="p">,</span><span class="w">
        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contract_signed_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T18:27:17"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contract_signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Customer Signature"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contract_body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"By submitting your order and authorizing..."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">768.75</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auto_process"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1025</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"payment_plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"user_agent"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"subtotal"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
        </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">140</span><span class="p">,</span><span class="w">
        </span><span class="s2">"offer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e3cbf1dc-0c11-483f-b604-d44fd93aac90"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">900</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Widget"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget-id"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Small product"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prod-sm"</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sample api plan"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"merchant_notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Customer is very happy"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ip_address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"integration_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"integration"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T17:13:14.181300"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8f999efe-5798-4b51-a6c5-d21b0d04124b"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e3cbf1dc-0c11-483f-b604-d44fd93aac90"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/New_York"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FL"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33601"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sample Customer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tampa"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_address2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"shipto_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 N. Tampa St."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"81325551212"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Customer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-11T05:54:27.000000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6d30d3c8-d024-45cc-9c3f-356fc8aee23d"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sample"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample.customer@gmail.com"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">518.49</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount_refunded"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.99</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount_pending"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount_paid"</span><span class="p">:</span><span class="w"> </span><span class="mf">512.5</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount_disputed"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1025</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"line_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">900</span><span class="p">,</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Widget"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget-id"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T17:13:14.262856"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0da61119-ca96-410b-a1cb-ca059f2f8395"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dynamic_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"generic"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dynamic"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Widget"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">900</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Small product"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prod-sm"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T17:13:14.264749"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"16aa3a67-5efb-42c4-8b3b-e59940a7423f"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dynamic_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"generic"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dynamic"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Small product"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T17:13:14.249186"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1b7c8912-ee07-4731-a301-503160dc3365"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dynamic_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"generic"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"dynamic"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"processing fee"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"installments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-12-28T18:27:16.910618"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T18:27:16.911366"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6a85b229-69e6-4850-8309-edf7bfc3cec1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-28T18:27:16.910618"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T18:27:16.927898"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0caa4d95-2252-4855-8f78-a0ecf426bf09"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-28T18:27:16.910618"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T18:27:16.931100"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7a6c0aba-1b55-43dc-8367-d7fada4f1bfa"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"disputes"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retrieves an existing payment plan</p>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>GET /payment_plan/:id</code>
<em>replace :id with the id of the plan</em></p>
<h2 id='list-all-plans'>List all plans</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/payment_plan?date=2018-11-28"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/payment_plan?date=2018-11-28'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_entries"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payment_plans"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"user_agent"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"subtotal"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"number"</span><span class="p">:</span><span class="w"> </span><span class="mi">140</span><span class="p">,</span><span class="w">
            </span><span class="s2">"offer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e3cbf1dc-0c11-483f-b604-d44fd93aac90"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">900</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Widget"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget-id"</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Small product"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"prod-sm"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">],</span><span class="w">
                </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sample api plan"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"merchant_notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Customer is very happy"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"ip_address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"integration_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"integration"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T17:13:14.181300"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8f999efe-5798-4b51-a6c5-d21b0d04124b"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e3cbf1dc-0c11-483f-b604-d44fd93aac90"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"timezone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/New_York"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"shipto_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FL"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"shipto_postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"33601"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"shipto_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sample Customer"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"shipto_country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"shipto_city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tampa"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"shipto_address2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"shipto_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123 N. Tampa St."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"phone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"81325551212"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Customer"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-11T05:54:27.000000"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6d30d3c8-d024-45cc-9c3f-356fc8aee23d"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sample"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sample.customer@gmail.com"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount_paid"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1025</span><span class="p">,</span><span class="w">
            </span><span class="s2">"line_items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                  </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mi">900</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Widget"</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"widget-id"</span><span class="w">
                  </span><span class="p">},</span><span class="w">
                  </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T17:13:14.262856"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0da61119-ca96-410b-a1cb-ca059f2f8395"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"dynamic_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"generic"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"dynamic"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Widget"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">900</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"payment_schedule"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"term_units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"months"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"term"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
                </span><span class="s2">"starts_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"starts_auto"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"repay_by_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-28"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"payment_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="p">,</span><span class="w">
                </span><span class="s2">"num_payments"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
                </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T17:13:14.235119"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1f5d9716-a041-47ef-8c57-86af22efa31c"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"frequency_units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"months"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"frequency"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="s2">"down_payment_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="p">,</span><span class="w">
                </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
                </span><span class="s2">"contract_signed_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T18:27:17"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"contract_signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Customer Signature"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"contract_body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"By submitting your order and authorizing..."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">768.75</span><span class="p">,</span><span class="w">
                </span><span class="s2">"auto_process"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1025</span><span class="p">,</span><span class="w">
                </span><span class="s2">"installments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-12-28T18:27:16.910618"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T18:27:16.911366"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6a85b229-69e6-4850-8309-edf7bfc3cec1"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-28T18:27:16.910618"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T18:27:16.927898"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0caa4d95-2252-4855-8f78-a0ecf426bf09"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="w">
                    </span><span class="p">},</span><span class="w">
                    </span><span class="p">{</span><span class="w">
                        </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-28T18:27:16.910618"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T18:27:16.931100"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7a6c0aba-1b55-43dc-8367-d7fada4f1bfa"</span><span class="p">,</span><span class="w">
                        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">]</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"page_size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="s2">"page_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Lists all payment plans, with the optional filters listed below</p>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>GET /payment_plan</code></p>
<h3 id='parameters-4'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>plan status. checkout, pending, open, paid, canceled, or defaulted</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>3 letter currency code</td>
</tr>
<tr>
<td>date</td>
<td>date</td>
<td>plan created date. YYYY-MM-DD</td>
</tr>
<tr>
<td>dateRange</td>
<td>string</td>
<td>plans created in a range of dates separated by the &#124; character. Ex. use &quot;2018-01-01&#124;2018-02-01&quot;</td>
</tr>
<tr>
<td>customer</td>
<td>string</td>
<td>plans with the given customer id</td>
</tr>
</tbody></table>
<h2 id='send-plan-request-email'>Send plan request email</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/payment_plan/send_plan_request/8f999efe-5798-4b51-a6c5-d21b0d04124b"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  --data <span class="s1">''</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/payment_plan/send_plan_request/8f999efe-5798-4b51-a6c5-d21b0d04124b'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Plan request email sent"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Send an emailed request to the customer to open the payment plan via Partially checkout. The payment plan must be in pending, canceled, defaulted, or paused status, and the merchant account must have an active Stripe account connected. </p>

<p>You can optionally choose to also update the payment plan status to pending, which will also allow the customer to open the payment plan from their portal.</p>
<h3 id='http-request-7'>HTTP Request</h3>
<p><code>POST /payment_plan/send_plan_request/:id</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>update_status</td>
<td>string</td>
<td>can only be updated to <code>&quot;pending&quot;</code></td>
</tr>
</tbody></table>
<h1 id='line-items'>Line Items</h1><h2 id='create-a-line-item'>Create a line item</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/line_item"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -- data <span class="s1">'{"payment_plan_id": "4a2da2b5-ccbc-4631-93ad-ea30da49a412", "amount": 5.99, "description": "adjustment"}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/line_item'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">payment_plan_id</span><span class="p">:</span> <span class="s1">'4a2da2b5-ccbc-4631-93ad-ea30da49a412'</span><span class="p">,</span>
    <span class="na">amount</span><span class="p">:</span> <span class="mf">5.99</span><span class="p">,</span>
    <span class="na">description</span><span class="p">:</span> <span class="s1">'adjustment'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">payment</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.99</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adjustment"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"dynamic"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"dynamic_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"generic"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2faa91f1-7b01-4111-9af9-967e70c272e8"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-22T15:24:23"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Adds a new line item to a payment plan. This can only be done on payment plans not in the open or paid statuses.</p>

<p>Adding a new line item to a payment plan will automatically adjust the payment plan total.</p>

<p>Line item amounts can be negative to decrease a payment plan amount, for example to give a customer a discount.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /line_item</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_plan_id</td>
<td>string</td>
<td>yes</td>
<td>id of the plan to make a payment on</td>
</tr>
<tr>
<td>amount</td>
<td>decimal</td>
<td>yes</td>
<td>The unit price of the line item. May be positive or negative</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>yes</td>
<td>the line item&#39;s description</td>
</tr>
<tr>
<td>quantity</td>
<td>integer</td>
<td>no</td>
<td>Th quantity of the line item. Defaults to 1 if not specified</td>
</tr>
<tr>
<td>image</td>
<td>string</td>
<td>no</td>
<td>URL to an image for the line item</td>
</tr>
<tr>
<td>weight</td>
<td>decimal</td>
<td>no</td>
<td>weight of the line item</td>
</tr>
<tr>
<td>weight_units</td>
<td>string</td>
<td>no</td>
<td>g, kg, oz, or lb. defaults to lb</td>
</tr>
<tr>
<td>meta</td>
<td>object</td>
<td>no</td>
<td>additional meta information about the line item</td>
</tr>
<tr>
<td>integration</td>
<td>string</td>
<td>no</td>
<td>third party service to send line item to, ex. &quot;shopify&quot; or &quot;bigcommerce&quot;</td>
</tr>
<tr>
<td>integration_id</td>
<td>string</td>
<td>no</td>
<td>line item id for third party service</td>
</tr>
</tbody></table>
<h2 id='delete-a-line-item'>Delete a line item</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/line_item/a9bec449-da6e-4dea-ad4a-a716aa90d40c"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -X DELETE
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/line_item/a9bec449-da6e-4dea-ad4a-a716aa90d40c'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'DELETE'</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LineItem deleted"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Deletes a line item. This can only be done on payment plans not in the open or paid statuses.</p>

<p>Deleting a line item will automatically decrease the associated payment plan&#39;s total amount.</p>

<p><code>DELETE /line_item/:id</code></p>

<p><em>replace :id with the id of the line item to delete</em></p>
<h1 id='payments'>Payments</h1>
<p>Payments can have a <em>paid</em>, <em>pending</em>, or <em>failed</em> status. Payments made with a bank account payment method
will be pending for up to 5 business days while we wait for them to be confirmed.</p>
<h2 id='create-a-payment'>Create a payment</h2>
<blockquote>
<p>Pay the entire balance</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/payment/create"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -- data <span class="s1">'{"payment_plan_id": "1597c18b-ffd4-4641-b2ca-78cccd3547f5", "amount": 241.87}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/payment/create'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">payment_plan_id</span><span class="p">:</span> <span class="s1">'1597c18b-ffd4-4641-b2ca-78cccd3547f5'</span><span class="p">,</span>
    <span class="na">amount</span><span class="p">:</span> <span class="mf">241.87</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">payment</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paid"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"processor_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ch_1DbYxLEs15StTpSvFVKDzPIx"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"processor_destination_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"processor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stripe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payment_plan_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1597c18b-ffd4-4641-b2ca-78cccd3547f5"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"paid_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T19:44:21"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T19:44:21.874251"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2c84ae4a-962c-479b-bed4-4696ef25099d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">241.87</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.39</span><span class="p">,</span><span class="w">
    </span><span class="s2">"customer_fee_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Making a payment for an amount less than the balance</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/payment/create"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -- data <span class="s1">'{"payment_plan_id": "027bb022-40b4-4763-945c-baddc612cbbb", "amount": 5.99}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/payment/create'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">payment_plan_id</span><span class="p">:</span> <span class="s1">'027bb022-40b4-4763-945c-baddc612cbbb'</span><span class="p">,</span>
    <span class="na">amount</span><span class="p">:</span> <span class="mf">5.99</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"payment_schedule"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"term_units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"months"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"term"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
        </span><span class="s2">"starts_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"starts_auto"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"repay_by_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-25"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"payment_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">116.91</span><span class="p">,</span><span class="w">
        </span><span class="s2">"num_payments"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
        </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"frequency_units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"weeks"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"frequency"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"down_payment_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.99</span><span class="p">,</span><span class="w">
        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contract_signed_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contract_signature"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contract_body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"By submitting your order and authorizing the charges on your card, you are legally bound to the following terms:</span><span class="se">\r\n\r\n</span><span class="s2">Layaway Agreement</span><span class="se">\r\n\r\n</span><span class="s2">This Layaway Agreement (</span><span class="se">\"</span><span class="s2">Agreement</span><span class="se">\"</span><span class="s2">) is made..."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">935.26</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auto_process"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">941.25</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"installments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-24T00:00:00"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">116.91</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-12-06T23:26:47.492554"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">116.91</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-12-20T23:26:47.492554"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">116.91</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-03T23:26:47.492554"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">116.91</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-17T23:26:47.492554"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">116.91</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-31T23:26:47.492554"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">116.91</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-14T23:26:47.492554"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">116.91</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-28T23:26:47.492554"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">116.89</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Make a payment on a payment plan for an arbitrary amount.</p>

<p>If the payment is for the entire remaining balance of the plan, it will be processed immediately.</p>

<p>If the payment is for less than the balance, a new payment schedule will need to be generated and signed by the customer.
This step does not actually process
the payment, but instead returns the adjusted payment schedule,
installments, and contract for the customer to sign. Which is completed in the <a href="#confirm-a-payment">Confirm a payment</a> step</p>

<p>In case the supplied payment method requires 3d secure authentication (required for <a href="https://stripe.com/payments/strong-customer-authentication">Strong Customer Authentication</a>), the resulting payment will have status &quot;requires_action&quot; and will contain the &quot;redirect_url&quot; key. In this scenario, you should redirect the user to the &quot;redirect_url&quot; to authorize the payment, after which point they will be redirected back to the &quot;return_url&quot; you provide.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /payment/create</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_plan_id</td>
<td>string</td>
<td>yes</td>
<td>id of the plan to make a payment on</td>
</tr>
<tr>
<td>amount</td>
<td>decimal</td>
<td>yes</td>
<td>amount of the payment</td>
</tr>
<tr>
<td>return_url</td>
<td>string</td>
<td>no</td>
<td>your URL to redirect user to after 3d secure authentication</td>
</tr>
</tbody></table>
<h2 id='confirm-a-payment'>Confirm a payment</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/payment/confirm"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -- data <span class="s1">'{"payment_plan_id": "027bb022-40b4-4763-945c-baddc612cbbb", "amount": 5.99, "contract_signature": "Customer signature"}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/payment/confirm'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">payment_plan_id</span><span class="p">:</span> <span class="s1">'027bb022-40b4-4763-945c-baddc612cbbb'</span><span class="p">,</span>
    <span class="na">amount</span><span class="p">:</span> <span class="mf">5.99</span><span class="p">,</span>
    <span class="na">contract_signature</span><span class="p">:</span> <span class="s1">'Customer signature'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">payment</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paid"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"processor_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ch_1DbZ8sEs15StTpSvDs76XSVh"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"processor_destination_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"processor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stripe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payment_plan_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"027bb022-40b4-4763-945c-baddc612cbbb"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"paid_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T19:56:17"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T19:56:17.050690"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e632f099-4c2b-4de9-b632-3966539be2d5"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.99</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6</span><span class="p">,</span><span class="w">
    </span><span class="s2">"customer_fee_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>step 2 in making a payment on a payment plan, adjusting future installments
signs the updated payment schedule contract from the create step and processes the payment</p>

<p>In case the supplied payment method requires 3d secure authentication, the resulting payment will have status &quot;requires_action&quot; and will contain the &quot;redirect_url&quot; key. In this scenario, you should redirect the user to the &quot;redirect_url&quot; to authorize the payment, after which point they will be redirected back to the &quot;return_url&quot; you provide.</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST /payment/confirm</code></p>
<h3 id='parameters-2'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_plan_id</td>
<td>string</td>
<td>yes</td>
<td>id of the plan to make a payment on</td>
</tr>
<tr>
<td>amount</td>
<td>decimal</td>
<td>yes</td>
<td>amount of the payment</td>
</tr>
<tr>
<td>contract_signature</td>
<td>string</td>
<td>yes</td>
<td>the customer&#39;s signature for the new payment schedule contract</td>
</tr>
<tr>
<td>return_url</td>
<td>string</td>
<td>no</td>
<td>your URL to redirect user to after 3d secure authentication</td>
</tr>
</tbody></table>
<h2 id='list-all-payments'>List all payments</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/payment"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/payment'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_entries"</span><span class="p">:</span><span class="w"> </span><span class="mi">234</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paid"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ch_1DbZ8sEs15StTpSvDs76XSVh"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor_destination_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"py_E3gVHD2z4rtVl9"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stripe"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"payment_plan_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"027bb022-40b4-4763-945c-baddc612cbbb"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"paid_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T19:56:17"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T19:56:17.050690"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e632f099-4c2b-4de9-b632-3966539be2d5"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.99</span><span class="p">,</span><span class="w">
            </span><span class="s2">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.6</span><span class="p">,</span><span class="w">
            </span><span class="s2">"customer_fee_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paid"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ch_1DbYxLEs15StTpSvFVKDzPIx"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor_destination_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"py_E3gK6PBRACnhi5"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stripe"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"payment_plan_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1597c18b-ffd4-4641-b2ca-78cccd3547f5"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"paid_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T19:44:21"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T19:44:21.874251"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2c84ae4a-962c-479b-bed4-4696ef25099d"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">241.87</span><span class="p">,</span><span class="w">
            </span><span class="s2">"fee"</span><span class="p">:</span><span class="w"> </span><span class="mf">12.39</span><span class="p">,</span><span class="w">
            </span><span class="s2">"customer_fee_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">//</span><span class="w"> </span><span class="err">...</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"page_size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="s2">"page_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Lists all payments, with the optional filters listed below</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET /payment</code></p>
<h3 id='parameters-3'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_plan_id</td>
<td>string</td>
<td>payments only for the given plan</td>
</tr>
<tr>
<td>q</td>
<td>string</td>
<td>a stripe payment id</td>
</tr>
<tr>
<td>status</td>
<td>string</td>
<td>payment status. paid, pending, or failed</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>3 letter currency code</td>
</tr>
<tr>
<td>date</td>
<td>date</td>
<td>payment created date. YYYY-MM-DD</td>
</tr>
<tr>
<td>dateRange</td>
<td>string</td>
<td>payments created in a range of dates separated by the &#124; character. Ex. use &quot;2018-01-01&#124;2018-02-01&quot;</td>
</tr>
<tr>
<td>customer</td>
<td>string</td>
<td>payments with the given customer id</td>
</tr>
</tbody></table>
<h1 id='payment-schedules'>Payment Schedules</h1>
<p>A payment schedule represents the terms and schedule for a payment plan. A payment plan can have multiple payment schedules if the customer makes a one off payment that adjusts the current payment schedule. A payment plan only has one active payment schedule  </p>
<h2 id='update-a-payment-schedule'>Update a payment schedule</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/payment_schedule/64823d54-9d47-4cd9-9db0-b293294ca341"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X PUT <span class="se">\</span>
  -- data <span class="s1">'{"term": 3}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/payment_schedule/64823d54-9d47-4cd9-9db0-b293294ca341'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'PUT'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">term</span><span class="p">:</span> <span class="mi">3</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"payment_schedule"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"term_units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"months"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"term"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="s2">"starts_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"starts_auto"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"repay_by_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-21"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"payment_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="p">,</span><span class="w">
        </span><span class="s2">"num_payments"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-12-21T22:01:18.623163"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"64823d54-9d47-4cd9-9db0-b293294ca341"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"frequency_units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"months"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"frequency"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"down_payment_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="p">,</span><span class="w">
        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contract_signed_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contract_signature"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contract_body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"By submitting your order and authorizing the charges on your card..."</span><span class="p">,</span><span class="w">
        </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">768.75</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auto_process"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1025</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"installments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-21T22:10:14.518787Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-21T22:10:14.518787Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-21T22:10:14.518787Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Can only be done for active schedules of plans in <em>checkout</em> status. If customer flexibility enabled, updates either the term, frequency, or down payment, and reevaluates the payment schedule and installments.</p>
<h3 id='http-request'>HTTP request</h3>
<p><code>PUT /payment_schedule/:id</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>down_payment_amount</td>
<td>amount of down payment</td>
</tr>
<tr>
<td>term</td>
<td>term or length of payment plan</td>
</tr>
<tr>
<td>frequency</td>
<td>frequency of payments</td>
</tr>
</tbody></table>
<h2 id='get-contract-pdf'>Get contract pdf</h2>
<p>Gets the binary pdf of the signed contract</p>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>GET /payment_schedule/contract_pdf/:id</code></p>
<h2 id='create-a-new-payment-schedule'>Create a new payment schedule</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/payment_schedule"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  -- data <span class="s1">'{"payment_plan_id": "71f98dc3-6d89-4e56-b14b-c0e27dac0158", "amount": 188.88, "term": 1, "term_units": "months", "frequency": 1, "frequency_units": "weeks"}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/payment_schedule'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">payment_plan_id</span><span class="p">:</span> <span class="s1">'71f98dc3-6d89-4e56-b14b-c0e27dac0158'</span><span class="p">,</span>
    <span class="na">amount</span><span class="p">:</span> <span class="mf">188.88</span><span class="p">,</span>
    <span class="na">term</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">term_units</span><span class="p">:</span> <span class="s1">'months'</span><span class="p">,</span>
    <span class="na">frequency</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">frequency_units</span><span class="p">:</span> <span class="s1">'weeks'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"payment_schedule"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"term_units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"months"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"term"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"starts_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"starts_auto"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"repay_by_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-12-26"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"payment_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">47.21</span><span class="p">,</span><span class="w">
        </span><span class="s2">"num_payments"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
        </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T20:49:46.792362"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0ec6f76b-8675-449f-9414-ccf44cc9c148"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"frequency_units"</span><span class="p">:</span><span class="w"> </span><span class="s2">"weeks"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"frequency"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"down_payment_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contract_signed_date"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contract_signature"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"contract_body"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
        </span><span class="s2">"balance"</span><span class="p">:</span><span class="w"> </span><span class="mf">188.8</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auto_process"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">188.8</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"installments"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-12-05T20:49:46.791705Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">47.21</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-12-12T20:49:46.791705Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">47.21</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-12-19T20:49:46.791705Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">47.21</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-12-26T20:49:46.791705Z"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">47.17</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Creates a new PaymentSchedule for a PaymentPlan,
making it the active schedule and deactivating all others.
Can&#39;t be done for open or paid status plans.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>POST /payment_schedule</code></p>
<h3 id='parameters-2'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_plan_id</td>
<td>string</td>
<td>yes</td>
<td></td>
<td>id of the payment plan</td>
</tr>
<tr>
<td>amount</td>
<td>decimal</td>
<td>yes</td>
<td></td>
<td>amount of the payment schedule</td>
</tr>
<tr>
<td>auto_process</td>
<td>boolean</td>
<td>no</td>
<td>true</td>
<td>true to automatically schedule future payments, false for manual payments</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>no</td>
<td></td>
<td>for manual payment schedules (auto_process=false), a description of how the payments will be processed</td>
</tr>
<tr>
<td>currency</td>
<td>string</td>
<td>no</td>
<td>currency in merchant settings</td>
<td>The currency to use for payment plans</td>
</tr>
<tr>
<td>down_payment</td>
<td>decimal</td>
<td>no</td>
<td>0</td>
<td>the amount or percent of down payment required, depending on down_payment_type</td>
</tr>
<tr>
<td>down_payment_type</td>
<td>string</td>
<td>no</td>
<td>percent</td>
<td>percent or amount</td>
</tr>
<tr>
<td>down_payment_flexible</td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>allow the customer to choose their down payment within a specified range</td>
</tr>
<tr>
<td>down_payment_min</td>
<td>decimal</td>
<td>no</td>
<td></td>
<td>min down payment percent or amount</td>
</tr>
<tr>
<td>down_payment_max</td>
<td>decimal</td>
<td>no</td>
<td></td>
<td>max down payment percent or amount</td>
</tr>
<tr>
<td>term</td>
<td>integer</td>
<td>no</td>
<td>3</td>
<td>the length of the payment plan</td>
</tr>
<tr>
<td>term_units</td>
<td>string</td>
<td>no</td>
<td>months</td>
<td>type of units for the payment plan term. weeks, months, years, payments (a fixed number of payments), or date (pay by a date)</td>
</tr>
<tr>
<td>term_date</td>
<td>date</td>
<td>no</td>
<td></td>
<td>final payment date when using term_units=date</td>
</tr>
<tr>
<td>term_flexible</td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>allow the customer to choose their term within the specified range</td>
</tr>
<tr>
<td>term_min</td>
<td>integer</td>
<td>no</td>
<td></td>
<td>the minimum term the customer can choose</td>
</tr>
<tr>
<td>term_max</td>
<td>integer</td>
<td>no</td>
<td></td>
<td>the maximum term the customer can choose</td>
</tr>
<tr>
<td>frequency</td>
<td>integer</td>
<td>no</td>
<td>1</td>
<td>the frequency of scheduled payments</td>
</tr>
<tr>
<td>frequency_units</td>
<td>string</td>
<td>no</td>
<td>months</td>
<td>type of units for the payment plan term. days, weeks, months, days_month (for specific days of the month)</td>
</tr>
<tr>
<td>frequency_days</td>
<td>array</td>
<td>no</td>
<td></td>
<td>array of specific days of the month for payments, for example [1, 15] for payments on the 1st and 15th of the month</td>
</tr>
<tr>
<td>frequency_flexible</td>
<td>boolean</td>
<td>no</td>
<td>false</td>
<td>allow the customer to choose their payment frequency within the specified range</td>
</tr>
<tr>
<td>frequency_min</td>
<td>integer</td>
<td>no</td>
<td></td>
<td>the minimum payment frequency the customer can choose</td>
</tr>
<tr>
<td>frequency_max</td>
<td>integer</td>
<td>no</td>
<td></td>
<td>the maximum payment frequency the customer can choose</td>
</tr>
<tr>
<td>starts_auto</td>
<td>boolean</td>
<td>no</td>
<td>true</td>
<td>whether or not to automatically schedule the first installment relative to today&#39;s date</td>
</tr>
<tr>
<td>starts_date</td>
<td>string</td>
<td>no</td>
<td></td>
<td>if starts_auto is false, the specified date will be the date of the first scheduled installment. YYYY-mm-dd</td>
</tr>
</tbody></table>
<h1 id='installments'>Installments</h1>
<p>Installments represent a payment to be processed in the future, as scheduled by a payment plan&#39;s payment schedule.</p>
<h2 id='pay-scheduled-installment'>Pay scheduled installment</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/installment/pay/6a85b229-69e6-4850-8309-edf7bfc3cec1"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -X PUT
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/installment/pay/6a85b229-69e6-4850-8309-edf7bfc3cec1'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'PUT'</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">payment</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paid"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"processor_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ch_1DbaigEs15StTpSvhzmfGjSA"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"processor_destination_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"processor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stripe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payment_plan_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8f999efe-5798-4b51-a6c5-d21b0d04124b"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"paid_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T21:37:21"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T21:37:21.296658"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"291221ab-b0a2-41dc-909b-1d1793bd23d8"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Pays a scheduled installment. Must be scheduled in the future and not already paid. If successful will return the payment.</p>

<p>In case the supplied payment method requires 3d secure authentication, the resulting payment will have status &quot;requires_action&quot; and will contain the &quot;redirect_url&quot; key. In this scenario, you should redirect the user to the &quot;redirect_url&quot; to authorize the payment, after which point they will be redirected back to the &quot;return_url&quot; you provide.</p>
<h3 id='http-request'>HTTP request</h3>
<p><code>PUT /installment/pay/:id</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>return_url</td>
<td>string</td>
<td>no</td>
<td>your URL to redirect user to after 3d secure authentication</td>
</tr>
</tbody></table>
<h2 id='list-installments'>List installments</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/installment?payment_schedule_id=1f5d9716-a041-47ef-8c57-86af22efa31c"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/installment?payment_schedule_id=1f5d9716-a041-47ef-8c57-86af22efa31c'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">installments</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>Returns an array of installments as follows</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-12-28T18:27:16.910618"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T18:27:16.911366"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6a85b229-69e6-4850-8309-edf7bfc3cec1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-01-28T18:27:16.910618"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T18:27:16.927898"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0caa4d95-2252-4855-8f78-a0ecf426bf09"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"scheduled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-02-28T18:27:16.910618"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"retry_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T18:27:16.931100"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7a6c0aba-1b55-43dc-8367-d7fada4f1bfa"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">256.25</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Gets all installments for the given <em>payment_schedule_id</em>. You can also list all upcoming installments for a customer by providing a <em>customer_id</em> parameter.</p>
<h1 id='refunds'>Refunds</h1><h2 id='refund-a-payment'>Refund a payment</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/refund"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  --data <span class="s1">'{"payment_id": "2d1d0234-87c4-4184-a49f-02f4c0c30abe", "amount": 5.99, "notes": "discount"}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/refund'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">payment_id</span><span class="p">:</span> <span class="s1">'2d1d0234-87c4-4184-a49f-02f4c0c30abe'</span><span class="p">,</span>
    <span class="na">amount</span><span class="p">:</span> <span class="mf">5.99</span><span class="p">,</span>
    <span class="na">notes</span><span class="p">:</span> <span class="s1">'discount'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">refund</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"requested_by_customer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"processor_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"re_1DbaweEs15StTpSviCrp112t"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"processor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stripe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"discount"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T21:51:46.423002"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a0990737-9234-44fc-857b-eac7b4ef3cbf"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"failure_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"failure_merchant_transfer_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.99</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Refunds the given amount of the payment. The refund amount must not exceed the amount of the payment or the amount not already refunded.</p>
<h3 id='http-request'>HTTP request</h3>
<p><code>POST /refund</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>payment_id</td>
<td>string</td>
<td>yes</td>
<td>id of the payment to refund</td>
</tr>
<tr>
<td>amount</td>
<td>decimal</td>
<td>yes</td>
<td>amount to refund</td>
</tr>
<tr>
<td>notes</td>
<td>string</td>
<td>no</td>
<td></td>
</tr>
</tbody></table>
<h2 id='list-refunds'>List refunds</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/refund"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/refund'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">refunds</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>Returns an array of refunds as follows</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_entries"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"refunds"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"requested_by_customer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"re_1DbaweEs15StTpSviCrp112t"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stripe"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"discount"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T21:51:46.423002"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a0990737-9234-44fc-857b-eac7b4ef3cbf"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"failure_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"failure_merchant_transfer_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.99</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"requested_by_customer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"re_1COApEEs15StTpSviNl0Utby"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stripe"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"notes"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-05-04T20:48:22.062965"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dd9778b8-7576-40a2-912c-223fe8a1df29"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"failure_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"failure_merchant_transfer_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"requested_by_customer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"re_1BTuvkEs15StTpSvSTTpommv"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stripe"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"notes"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-30T16:30:34.631848"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aad5ba81-d73a-4a99-bd82-823e490b7d68"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"failure_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"customer_account_closed"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"failure_merchant_transfer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tr_1BTv3SEs15StTpSvoFttIcYV"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"requested_by_customer"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"re_1BR0AtEs15StTpSv4nRc0UZE"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stripe"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"customer was furious. oh well"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-22T15:30:09.120225"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"be123b2d-2d0d-4d58-abab-bff04382685c"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"failure_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"failure_merchant_transfer_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"succeeded"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"re_17FoZ1Es15StTpSvXcn4uLPp"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"processor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stripe"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"notes"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-12-08T16:43:43.000000"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6e071d81-f030-41db-8511-6aa646f6dc75"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"failure_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"failure_merchant_transfer_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">472.19</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"page_size"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="s2">"page_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Gets all refunds</p>
<h3 id='http-request-2'>HTTP request</h3>
<p><code>GET /refund</code></p>
<h3 id='parameters-2'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>reason</td>
<td>string</td>
<td>reason for the refund. requested_by_customer, duplicate, or fraudulent</td>
</tr>
<tr>
<td>date</td>
<td>date</td>
<td>refund created date. YYYY-MM-DD</td>
</tr>
<tr>
<td>dateRange</td>
<td>string</td>
<td>refunds created in a range of dates. Ex. use &quot;2018-01-01</td>
</tr>
<tr>
<td>customer</td>
<td>string</td>
<td>refunds with the given customer id</td>
</tr>
</tbody></table>
<h1 id='disputes'>Disputes</h1><h2 id='list-disputes'>List disputes</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/dispute"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/dispute'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">disputes</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>Returns an array of disputes as follows</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"payment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3098916e-1eb1-4a02-83a2-99e32d6d606f"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">25.65</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-09-05T07:35:45.000000"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"warning_needs_response"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unrecognized"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Gets all disputes</p>
<h3 id='http-request'>HTTP request</h3>
<p><code>GET /dispute</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>status</td>
<td>string</td>
<td>status of the dispute</td>
</tr>
<tr>
<td>reason</td>
<td>string</td>
<td>reason for the dispute</td>
</tr>
<tr>
<td>date</td>
<td>date</td>
<td>dispute created date. YYYY-MM-DD</td>
</tr>
<tr>
<td>dateRange</td>
<td>string</td>
<td>disputes created in a range of dates. Ex. use &quot;2018-01-01</td>
</tr>
<tr>
<td>customer</td>
<td>string</td>
<td>disputes with the given customer id</td>
</tr>
</tbody></table>
<h1 id='webhooks'>Webhooks</h1><h2 id='create-a-webhook'>Create a webhook</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/webhook"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  -X POST <span class="se">\</span>
  --data <span class="s1">'{"url": "http://localhost:8888/hook"}'</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/webhook'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'POST'</span><span class="p">,</span>
  <span class="na">json</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">url</span><span class="p">:</span> <span class="s1">'http://localhost:8888/hook'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">webhook</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:8888/hook"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T22:22:06.355439"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60689b2d-d391-417e-9f59-7b65e3e50d8d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-11-28T22:22:06.355432"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d5e43bed-041c-4ff4-b422-a401b10aad79"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Creates a new webhook. Events that can be subscribed to are plan_opened, plan_paid, plan_defaulted, payment_succeeded, and payment_failed</p>
<h3 id='http-request'>HTTP request</h3>
<p><code>POST /webhook</code></p>
<h3 id='parameters'>Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>url</td>
<td>string</td>
<td>yes</td>
<td>complete URL of the webhook, including https</td>
</tr>
<tr>
<td>event</td>
<td>string</td>
<td>no</td>
<td>the event to subscribe to, or * for all events (default)</td>
</tr>
</tbody></table>
<h2 id='list-webhooks'>List webhooks</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/webhook"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/webhook'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">hooks</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>Returns an array of webhooks as follows</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://prestashop.local:8080/index.php?fc=module&amp;module=partially&amp;controller=notify&amp;action=webhook"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-08T15:34:35.207108"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"60689b2d-d391-417e-9f59-7b65e3e50d8d"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"inserted_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-08T15:34:35.207102"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0aeece05-8e24-419b-a2ad-466a70de9b4b"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Gets all webhooks</p>
<h3 id='http-request-2'>HTTP request</h3>
<p><code>GET /webhook</code></p>
<h2 id='delete-a-webhook'>Delete a webhook</h2><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://partial.ly/api/webhook/a9bec449-da6e-4dea-ad4a-a716aa90d40c"</span> <span class="se">\</span>
  -H <span class="s2">"Authorization: Bearer your_api_key"</span> <span class="se">\</span>
  -X DELETE
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="c1">// examples use the request library</span>
<span class="c1">// https://github.com/request/request</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'request'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">options</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">url</span><span class="p">:</span> <span class="s1">'https://partial.ly/api/webhook/a9bec449-da6e-4dea-ad4a-a716aa90d40c'</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">Authorization</span><span class="p">:</span> <span class="s1">'Bearer your_api_key'</span>
  <span class="p">},</span>
  <span class="na">method</span><span class="p">:</span> <span class="s1">'DELETE'</span>
<span class="p">};</span>

<span class="nx">request</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">body</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// asynchronous callback function</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Webhook deleted"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>deletes a webhook</p>

<p><code>DELETE /webhook/:id</code></p>

<p><em>replace :id with the id of the webhook to delete</em></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
                <a href="#" data-language-name="javascript">Node</a>
          </div>
      </div>
    </div>
  </body>
</html>
